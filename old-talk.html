<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">

	<title>Data-Driven HPC: A Foundation for Intelligent Second Generation HPC Application Ecosystems | Ole Weidner | University of Edinburgh</title>

	<meta name="description" content="Towards Data-Centric HPC Platforms">
	<meta name="author" content="Ole Weidner">

	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/moon.css" id="theme">

	<!-- Code syntax highlighting -->
	<link rel="stylesheet" href="lib/css/zenburn.css">

	<!-- Printing and PDF exports -->
	<script>
	var link = document.createElement( 'link' );
	link.rel = 'stylesheet';
	link.type = 'text/css';
	link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
	document.getElementsByTagName( 'head' )[0].appendChild( link );
	</script>

	<!--[if lt IE 9]>
	<script src="lib/js/html5shiv.js"></script>
	<![endif]-->
</head>

<body>

	<div class="reveal">

		<div class="slides">

			<!------------------------------------------------------------------------------------------->

			<section>
				<h1><font style="background-color: #ca1e3b">&nbsp; Data-Driven HPC &nbsp;</font></h1>
				<h3>A Foundation for Intelligent Second Generation HPC Application Ecosystems</h3>
				<p></p>

				<p>
					<small>
						Ole Weidner &middot; School of Informatics &middot; University of Edinburgh
					</small>
					<br>
					<small>
						<a href="mailto:ole.weidner@ed.ac.uk">ole.weidner@ed.ac.uk</a> &middot;
						<a href="https://github.com/datadrivenhpc">https://github.com/datadrivenhpc</a>
					</small>
				</p>
			</section>

			<!------------------------------------------------------------------------------------------->

			<section>
				<h2>About Me</h2>
				<p>Applications that need continuous insights into their environment </p>
				<ul>
					<li>resource utilization data</li>
					<li>network utilization data</li>
					<li>scheduler data</li>
					<li>application process data</li>
					<li>hardware sensor data</li>
					<li>other custom-generated data</li>
				</ul>
				<br><br>
				<h4 style="background-color: #ca1e3b">On exascale systems, that's going to be <u>a lot</u> of data.</h4>
			</section>

			<!------------------------------------------------------------------------------------------->

			<section>
				<h2>Second Generation Application</h2>
				<!-- <p>Applications that need continuous insights into their environment </p>
				<ul>
					<li>resource utilization data</li>
					<li>network utilization data</li>
					<li>scheduler data</li>
					<li>application process data</li>
					<li>hardware sensor data</li>
					<li>other custom-generated data</li>
				</ul>
				<br><br>
				<h4 style="background-color: #ca1e3b">On exascale systems, that's going to be <u>a lot</u> of data.</h4> -->
			</section>

			<!------------------------------------------------------------------------------------------->

			<section>
				<h2>Second Generation Application</h2>
				<!-- <p>Applications that need continuous insights into their environment </p>
				<ul>
					<li>resource utilization data</li>
					<li>network utilization data</li>
					<li>scheduler data</li>
					<li>application process data</li>
					<li>hardware sensor data</li>
					<li>other custom-generated data</li>
				</ul>
				<br><br>
				<h4 style="background-color: #ca1e3b">On exascale systems, that's going to be <u>a lot</u> of data.</h4> -->
			</section>

			<!------------------------------------------------------------------------------------------->

			<!-- <section>
				<h2>Why Bother With all that Data ?</h2>
				<p>Operational data is useful for:</p>
				<ul>
					<li>platform optimization and planning</li>
					<li>scheduling and accounting</li>
					<li>application analysis and optimization</li>
					<li>failure prediction and detection</li><br>
					<li> <font style="background-color: #ca1e3b">novel application & framework architectures</font></li>
			</ul>
		</section> -->

		<!------------------------------------------------------------------------------------------->
		<!-- <section>
			<h2>Moving Towards Real-Time Data Usage</h2>
			<ul>
				<li>dynamic resource adjustment</li>
				<li>in-situ application analytics / adaptive behavior</li>
				<li>real-time warnings and suggestions</li>
				<li>supporting HPC federations</li>
				<li> . . . </li>
			</ul>
		</section> -->

		<!--------------------------------------------------------------------------------------------->

		<!-- <section>

			<section>
				<h2> Existing Approaches</h2>
				<ul>
					<li>data collected by sysadmin tools (Munin, RDDTool, ...)</li>
					<li>data generated by scheduler and job manager</li>
					<li>home-baked solutions in apps and frameworks</li>
					<li>application instrumentation / tracing, e.g. with Vampir</li>
					<li>data storage usually file-based or in RDBMS </li>
				</ul>
			</section> -->

			<!----------------------------------------------------------------------------------------->

			<!-- <section>
				<h2> Accessibility Issues </font></h2>
				<ul>
					<li>often not openly accessible</li>
					<li>often not in real-time</li>
					<li>data half-life often unclear </li>
					<li>exposed via vastly different interfaces</li>
					<li>not always machine-readable</li>
				</ul>
			</section> -->

			<!----------------------------------------------------------------------------------------->

			<!-- <section>
				<h2> Scope Issues </font></h2>
				<ul>
					<li>data with node-level granularity only</li>
					<li>process-level data usually not available</li>
					<li>difficult to correlate different datasets</li>
					<li>difficult to map data to applications or jobs</li>
				</ul>
			</section> -->

			<!----------------------------------------------------------------------------------------->

			<!-- <section>
				<h2> Scalability Issues </font></h2>
				<ul>
					<li>home-baked solutions don't scale / create overhead</li>
					<li>existing monitoring solutions won't scale forever</li>
					<ul>
						<li>exascale systems ?</li>
						<li>increase sample intervals ?</li>
					</ul>
				</ul>

			</section>

			<section>
				<h2> Analytics Issues </font></h2>

				<ul>
					<li>no guides or frameworks to analyse the data</li>
				</ul>

			</section>


		</section> -->

		<!--------------------------------------------------------------------------------------------->


		<!-- <section>
			<h2><font style="background-color: #ca1e3b">&nbsp; Missed Opportunities &nbsp;</font></h2>
			<p>Current HPC platform data strategies do not always meet the requirements and expectations
				of users and applications.</p>
				<p>Untapped insights and optimization potential.</p>
			</section> -->

			<!------------------------------------------------------------------------------------------->

			<!-- <section>
				<h2>What is a Data-Driven HPC Platform ?</h2>
				<blockquote> &ldquo; [...] using large-scale data analytics platforms, tools and techniques
					to gain real-time and historical insights <u>into</u> an HPC platform and its applications. &rdquo;
				</blockquote>
			</section> -->

			<!------------------------------------------------------------------------------------------->

			<!-- <section>
				<h2>Mission Statement</h2>

				<p> To conceptualise and develop a data-driven HPC platform that provides ingestion,
					transport, storage, processing and access of operational data <u>at scale</u> without
					disrupting the current HPC usage model.
				</p>
			</section> -->

			<!------------------------------------------------------------------------------------------->

			<!-- <section>
				<h2>Architecture</h2>
				<img class="test" data-src="./images/architecture.png"\>
			</section> -->

			<!------------------------------------------------------------------------------------------->

			<!-- <section>

				<section>
					<h2>Testbed</h2>
					<ul>
						<li>SLURM Cluster set up in AWS</li>
						<ul>
							<li>1 head / login node</li>
							<li>4 compute nodes (c4.xlarge 8GB RAM, 4 vCPUS)</li>
							<li>Shared NFS between nodes</li>
							<br>
							<li>1 Kafka node (data pipeline)</li>
							<li>2 node Hadoop HDFS "sidekick cluster"</li>
						</ul>
					</ul>
				</section> -->

				<!------------------------------------------------------------------------------------------->

				<!-- <section>
					<h2>Container Integration</h2>
					<ul>
						<li>much easier to instrument containers with sensors</li>
						<li>Docker daemon running on each compute node</li>
						<li>Rancher (http://rancher.com/) as container manager</li>
						<ul>
							<li>light-weight and <u>non-intrusive</u></li>
							<li>web-based UI + API</li>
							<li>full software-defined networking stack</li>
						</ul>
						<li>modified SLURM (sbatch) allows container submission, UI and Kafka integration</li>
					<ul>
				</section> -->

				<!------------------------------------------------------------------------------------------->

				<!-- <section>
					<h2>Job Submission Modes</h2>
					<ul>
						<li>regular SLURM batch-job (processes, no container)</li>
						<li>single Docker container </li>
						<li>Docker Compose description (multiple containers with dependencies) </li>
						<li>Rancher Compose description (Docker Compose + networking, e.g. IP-Sec) </li>
						<li>resource allocation only (PaaS on HPC!) </li>

					<ul>
				</section> -->


				<!------------------------------------------------------------------------------------------->

				<!-- <section>
					<h2>SLURM Docker/Rancher Integration</h2>
<pre><code class="bash" style="word-wrap: break-word;">
$ sbatch myjob.sh

  Submitted batch job 102045

  Rancher:  https://ui.dd-hpc:8080/env/1a11
  Username: s1063117
  Password: zfppT4Gk

  Kafka:    kafka.dd-hpc:9092
  Topic:    slurm.job.102045

</code></pre>

				</section> -->


				<!------------------------------------------------------------------------------------------->

				<!-- <section>
					<h2>Rancher UI</h2>
					<img class="test" data-src="./images/rancher_01.png"\>
				</section>

				<section>
					<h2>Kafka Data Stream</h2>

					<pre><code class="python" style="word-wrap: break-word;">
import json
from kafka.client import KafkaClient
from kafka.consumer import SimpleConsumer

client = KafkaClient("kafka.dd-hpc:9092")
consumer = SimpleConsumer(client, "slurm.job.102045")

for message in consumer.get_messages(count=6000, block=False):
	data = json.loads(message.message.value)

[...]
					</code></pre>

				</section>
				<section>
				<h2>Streaming Data Output</h2>

				<p>E.g., in iPython:</p>

				<img class="test" data-src="./images/ipython_plot.png"\>
			</section>

			</section> -->

			<!------------------------------------------------------------------------------------------->

			<!-- <section>
				<h2>Open Questions & Next Steps</h2>

				<ul>
					<li>How useful is this ?</li>
					<li>What is the overhead ?</li>
					<li>Does this work at scale ?</li>
					<br>
					<li>Mature the concept and implementation ?</li>
				</ul>

			</section> -->


			<section style="text-align: left;">
				<h1>THANK YOU</h1>
				<p>
					Slides available online: <br>
					<a href="https://datadrivenhpc.github.io/ddhpc-talk/">
						https://datadrivenhpc.github.io/ddhpc-talk/</a>
				</p>
			</section>

		</div>

	</div>

	<script src="lib/js/head.min.js"></script>
	<script src="js/reveal.js"></script>

	<script>

	// Full list of configuration options available at:
	// https://github.com/hakimel/reveal.js#configuration
	Reveal.initialize({
		controls: true,
		progress: true,
		history: true,
		center: true,

		parallaxBackgroundImage: "./images/parallax.jpg",

		// Parallax background size
		parallaxBackgroundSize: "3000px 1694px", // - currently only pixels are supported (don't use % or auto)

// Number of pixels to move the parallax background per slide
// - Calculated automatically unless specified
// - Set to 0 to disable movement along an axis
// parallaxBackgroundHorizontal: 20,
// parallaxBackgroundVertical: 50,


		transition: 'slide', // none/fade/slide/convex/concave/zoom

		// Optional reveal.js plugins
		dependencies: [
			{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
			{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
			{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
			{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
			{ src: 'plugin/zoom-js/zoom.js', async: true },
			{ src: 'plugin/notes/notes.js', async: true }
		]
	});

	</script>

</body>
</html>
