<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">

  <title>Seastar HPC Telemetry Framework | Ole Weidner | University of Edinburgh</title>

  <meta name="description" content="Towards Data-Centric HPC Platforms">
  <meta name="author" content="Ole Weidner">

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

  <link rel="stylesheet" href="css/reveal.css">
  <link rel="stylesheet" href="css/theme/moon.css" id="theme">

  <!-- Code syntax highlighting -->
  <link rel="stylesheet" href="lib/css/zenburn.css">

  <!-- Printing and PDF exports -->
  <script>
  var link = document.createElement( 'link' );
  link.rel = 'stylesheet';
  link.type = 'text/css';
  link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
  document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>

  <!--[if lt IE 9]>
  <script src="lib/js/html5shiv.js"></script>
  <![endif]-->
</head>

<body>

  <div class="reveal">

    <div class="slides">

      <!-- SLIDE 01 -->
      <!------------------------------------------------------------------------------------------->
      <section>
        <!-- <h1><font style="background-color: #ca1e3b">&nbsp; SeaSTAR &nbsp;</font></h1> -->
        <h2 style="background-color: #ca1e3b">
          Towards a Unified Telemetry Data Framework for HPC Environments</h2>
        <br/>

        <table>
          <tr>
            <td align="center"> <small>
              <!-- <img class="plain" src="images/university_of_edinburgh.png" style="height:40px"> <br/> -->
              Ole Weidner <br/>
              School of Informatics <br/>
              University of Edinburgh <br/>
              <i><a href="mailto:ole.weidner@ed.ac.uk">ole.weidner@ed.ac.uk</a></i>
            </small> </td>
            <td align="center"> <small>
              <!-- <img class="plain" src="images/university_of_st_andrews.png" style="height:40px"> <br/> -->
              Adam Barker <br/>
              School of Computer Science <br/>
              University of St Andrews <br/>
              <i><a href="mailto:adam.barker@st-andrews.ac.uk">adam.barker@st-andrews.ac.uk</a></i>
            </small> </td>
            <td align="center"> <small>
              <!-- <img class="plain" src="images/university_of_edinburgh.png" style="height:40px"> <br/> -->
              Malcolm Atkinson <br/>
              School of Informatics <br/>
              University of Edinburgh <br/>
              <i><a href="mailto:malcolm.atkinson@ed.ac.uk">malcolm.atkinson@ed.ac.uk</a></i>
            </small> </td>
        </table>

        <br/><br/>

        <h4>International Workshop on Runtime and Operating Systems for Supercomputers</h4>
        <h4> Washington, D.C., USA, June 27, 2017 </h4>

      </section>
      <!------------------------------------------------------------------------------------------->

      <!-- SLIDE XX -->
      <!------------------------------------------------------------------------------------------->
      <!-- <section>
        <h2>About</h2>
        <ul>
          <li>Big-data engineer at LEGO System A/S in Denmark</li>
          <li>Part-time PhD student at the University of Edinburgh </li>
          <li>Previously: research associate at Louisiana State University and Rutgers University, USA</li>
          <li>Have been involved for more then 10 years in many <i>second generation</i> HPC application projects</li>
          <ul>
            <li>SAGA: The Simple API for Grid Applications</li>
            <li>RADICAL-Pilot workload management system</li>
            <li>EnsembleMD molecular dynamics toolkit</li>
            <li>ATLAS PanDA workload management system</li>
          </ul>
        </ul>
        <br><br>
      </section> -->
      <!------------------------------------------------------------------------------------------->


      <!-- SLIDE XX -->
      <!------------------------------------------------------------------------------------------->
      <section>
        <h2>Talk Outline</h2>
        <ol>
          <li>Application Challenges &amp; Motivation</li>
          <li>Telemetry Data as Platform Service</li>
          <li>Graph-Based Platform Model (Context Structure)</li>
          <li>Unified Programming Interface</li>
          <li>Prototype Implementation </li>
          <li>Outlook &amp; Next Steps</li>

        </ol>
      </section>
      <!------------------------------------------------------------------------------------------->

<!-- SLIDE XX -->
<!------------------------------------------------------------------------------------------->
<section>

  <section> <!-- SLIDE XX -->

    <h2>Application Challenges &amp; Motivation</h2>

    <aside class="notes">
      - Notes
    </aside>

  </section>

  <section> <!-- SLIDE XX -->

    <h2>Scenario 1: Degraded Disk I/O</h2>

    <img class="plain" src="images/s1_1.png" style="height:450px"> <br/>

    Describe the single box plot here. Describe how this leads to longer execution times + wasted credits

    <aside class="notes">
      - Notes
    </aside>

  </section>

  <section> <!-- SLIDE XX -->

    <h2>Scenario 1: Observation</h2>

    <img class="plain" src="images/s1_2.png" style="height:450px"> <br/>

    Show second plot comapring with I/O throughput (find correct OS metric) trend.

    <aside class="notes">
      - Notes

    </aside>

  </section>

  <section> <!-- SLIDE XX -->

    <h2>Scenario 1: Contextualization</h2>

    <img class="plain" src="images/s1_3.png" style="height:450px"> <br/>

    Show heatmap and show how faulty nodes caused the issue.

    <aside class="notes">
      - Notes
    </aside>

  </section>

  <section> <!-- SLIDE XX -->

    <h2>Scenario 2: Network Issues</h2>

    <img class="plain" src="images/s2_1.png" style="height:450px"> <br/>

    Describe the single box plot here. Describe how this leads to longer execution times + wasted credits

    <aside class="notes">
      - Notes
    </aside>

  </section>

  <section> <!-- SLIDE XX -->

    <h2>Scenario 2: Observation</h2>

    <img class="plain" src="images/s2_2.png" style="height:450px"> <br/>

    Show second plot comapring with I/O throughput (find correct OS metric) trend.

    <aside class="notes">
      - Notes

    </aside>

  </section>

  <section> <!-- SLIDE XX -->

    <h2>Scenario 2: Contextualization</h2>

    <img class="plain" src="images/s2_2.png" style="height:450px"> <br/>

    Show heatmap and explain how faulty network switch caused issues

    <aside class="notes">
      - Notes
    </aside>

  </section>

  <section> <!-- SLIDE XX -->

    <h2>Scenario 3: Dynamic Memory Requirements</h2>
    Describe the single box plot here. Describe how this leads to longer execution times + wasted credits

    <aside class="notes">
      - Notes
    </aside>

  </section>

  <section> <!-- SLIDE XX -->

    <h2>Scenario 3: Observation</h2>
    Show second plot comapring with I/O throughput (find correct OS metric) trend.

    <aside class="notes">
      - Notes

    </aside>

  </section>

  <section> <!-- SLIDE XX -->

    <h2>Scenario 3: Contextualization</h2>
    Show heatmap and explain.

    <aside class="notes">
      - Notes
    </aside>

  </section>






  <section> <!-- SLIDE XX -->

    <h2>Lessons Learned</h2>
    Argue high costs of creating insights, time + cpu hours
    and discuss problem of data without strucutre / model.

    <aside class="notes">
      - Notes
    </aside>

  </section>

</section>
<!------------------------------------------------------------------------------------------->


<!-- SLIDE XX -->
<!------------------------------------------------------------------------------------------->
<section>

  <section>
    <h2>Telemetry Data as Platform Service</h2>
  </section>

  <section>
    <h2>TOPIC A</h2>
  </section>

  <section>
    <h2>Requirements</h2>
  </section>

  <section>
    <h2>TOPIC C</u></h2>
  </section>

</section>

<!-- SLIDE XX -->
<!------------------------------------------------------------------------------------------->
<section>

  <section>
    <h2>Challenges</h2>
  </section>

  <section>
    <h2>TOPIC A</h2>
  </section>

  <section>
    <h2>TOPIC B</h2>
  </section>

  <section>
    <h2>TOPIC C</u></h2>
  </section>

</section>

<!-- SLIDE XX -->
<!------------------------------------------------------------------------------------------->
<section>
  <h2>Another Definition of 2nd Gen Apps</h2>

  <br><br>
  <h4 style="background-color: #ca1e3b">
    "Second generation HPC applications require continuous access to
    operational data in order to <u>observe</u>
    their behavior and the behavior of their environment so they can operate efficiently."
  </h4>
</section>
<!------------------------------------------------------------------------------------------->


<!-- SLIDE XX -->
<!------------------------------------------------------------------------------------------->
<section>
  <h2>Problem</h2>
  <br>

  <h3>Observing on a small scale, in a desktop environment is (relatively) simple</h3>
  <br>
  <h3 style="background-color: #ca1e3b">On a large scale on an HPC platform it is very difficult</h3>
</section>
<!------------------------------------------------------------------------------------------->


<!-- SLIDE XX -->
<!------------------------------------------------------------------------------------------->
<section>
  <h2>Why is it difficult?</h2>
  <ul>
    <li>User's line-of-sight ends at the job-level</li>
    <li>Data collection requires application instrumentation</li>

    <li>Collection and transport at scale is non-trival</li>
    <li>Identifying anomalies and patterns in a stream of data is not trivial (especially at scale)</li>

    <br>
    <h3 style="background-color: #ca1e3b">&nbsp;Result: Many applications continue to "fly blindly"&nbsp;</h3>


  </ul>
</section>
<!------------------------------------------------------------------------------------------->



<!-- SLIDE XX -->
<!------------------------------------------------------------------------------------------->
<section>
  <h2>Requirements</u></h2>
  <p>In order to implement strategies against "flying blindly", applications require
    an environment which provides:</p>
    <ol>
      <li>infrastructure to transport, analyze, store application data (at scale)</li>
      <li>comprehensive real-time operational data from the HPC platform</li>
      <li>mechanisms to interact with the platform to implement feedback loops</li>
    </ol>
  </section>
  <!------------------------------------------------------------------------------------------->





  <!-- SLIDE XX -->
  <!------------------------------------------------------------------------------------------->
  <section>
    <h2>Data-Driven HPC Idea</u></h2>
    <p>Apply principles, architectures and tools from "big data" / large-scale data analytics to
      manage application and platform operational data:</p>
      <ol>
        <li>Look at HPC clusters and their application as large-scale distributed continuous sensor data</li>
        <li>Use scalable transport mechanisms to move the data from their sources into an analytics pipeline</li>
        <li>Use real-time, stream processing to analyze the data for anomalies, patterns, etc.</li>
        <li>Integrate this with HPC platforms</li>
      </ol>

      <br><br>

      <h4 class="fragment fade-in" style="background-color: #ca1e3b">Maps our problem to a well-known space
        with many established solutions</h4>


      </section>
      <!------------------------------------------------------------------------------------------->

      <!-- SLIDE XX -->
      <!------------------------------------------------------------------------------------------->
      <section>
        <h2>Challenge 1: Scale</h2>

        <p>How do we handle (operational) data at scale without impeding the
          performance of the platforms or applications</p>

          <ul>
            <li>How to collect data at scale?</li>
            <li>How to transport data at scale?</li>
            <li>How to analyze data at scale?</li>
          </ul>

          <br><br>
          <!-- <h4 class="fragment fade-in" style="background-color: #ca1e3b">We can turn to big data to solve most of these problems for us</h4> -->

        </section>
        <!------------------------------------------------------------------------------------------->


        <!-- SLIDE XX -->
        <!------------------------------------------------------------------------------------------->
        <section>
          <h2>Challenge 2: Scope and Expertise</h2>

          <p>Different user and application groups require data at different levels, from raw data to high-level signals.
            How do we account for different requirements? How do we support a
            broad level of expertises? The majority of users are <u>not</u> data scientits.
          </p>

          <br><br>
          <!-- <h4 class="fragment fade-in" style="background-color: #ca1e3b">Translates to resarch questions in the area of analytics and interfaces</h4> -->


        </section>
        <!------------------------------------------------------------------------------------------->


        <!-- SLIDE XX -->
        <!------------------------------------------------------------------------------------------->
        <section>
          <h2>Challenge 3: Control and Feedback</h2>

          <p>Once we have signals, how can we react to them. How do we interact
            with the resource manager? Where can decision logic be implemented?</p>

            <br><br>
            <!-- <h4 class="fragment fade-in" style="background-color: #ca1e3b">Translates to resarch questions in the area of system architecture</h4> -->


          </section>
          <!------------------------------------------------------------------------------------------->


          <!-- SLIDE XX -->
          <!------------------------------------------------------------------------------------------->
          <section>
            <h2>Challenge 4: Integration</h2>

            <p>How would a data-driven platform be integrated with HPC
            systems? How do we bridge the gap to the resource management / queuing
            systems? How to avoid disruptiveness? </p>


            </section>
            <!------------------------------------------------------------------------------------------->



            <!-- SLIDE XX -->
            <!------------------------------------------------------------------------------------------->
            <!-- <section>
            <h2>Operational Data = <u>Foundation for Insights</u></h2>
            <span class="fragment fade-in">instead of<br><br></span>
            <h2><font class="fragment fade-in" style="background-color: #ca1e3b">&nbsp; Flying Blind &nbsp;</font></h2>
          </section> -->
          <!------------------------------------------------------------------------------------------->

          <!-- SLIDE XX -->
          <!------------------------------------------------------------------------------------------->
          <section>
            <h2>Research Approach</h2>
            <p>Build a prototype Data-Driven HPC system that handles
              data collection and addresses the scale challanges. Explore the
              other challanges within this prototype, define the research questions.
            </p>
        </section>
        <!------------------------------------------------------------------------------------------->

        <!-- SLIDE XX -->
        <!------------------------------------------------------------------------------------------->

        <section>
          <h2>DDHPC  Prototype</h2>
          <img class="test" data-src="./images/architecture.png"\>
        </section>

        <section>
          <h2>DDHPC  Architecture</h2>
          <img class="test" data-src="./images/arch.png"\>
        </section>
    <!------------------------------------------------------------------------------------------->


    <!-- SLIDE XX -->
    <!------------------------------------------------------------------------------------------->
    <section>
      <h2>DDHPC Data Model</h2>
      <p>Allows "hollistic", drill-down view of application jobs:</p>
      <ul>
        <li>Job level > process level > thread level</li>
        <li>Resouce Data</li>
        <ul><li>CPU counters, memory and filesystem metrics, network and disk I/O counters, </li> </ul>
        <li>Process Data</li>
        <ul><li>CPU counters, memory and filesystem metrics, network and disk I/O counters, </li> </ul>
        <li>Custom application-defined data</li>
      </ul>
    </section>
    <!------------------------------------------------------------------------------------------->

    <section>
      <h2>DDHPC Data Model</h2>
      <img class="test" data-src="./images/drilldown.png"\>
    </section>

    <!-- SLIDE XX -->
    <!------------------------------------------------------------------------------------------->
    <section>
      <h2>DDHPC API</h2>
      <ul>
        <li>Provides access to application job data</li>
        <li>Allows definition of signals based on data</li>
        <li>Provides callbacks when a signal is triggerd</li>
        <li>Allows to access application process controls</li>
      </ul>
    </section>
    <!------------------------------------------------------------------------------------------->



    <!-- SLIDE XX -->
    <!------------------------------------------------------------------------------------------->
    <section>
      <h2>Data Collection</h2>
      <p>A set of data collection services run on each node and forward
        data to the Kafka messaging servers</p>
        <ul>
          <li>ddhpc-resource-sensor: collects resource-level data</li>
          <li>ddhpc-process-sensor: collects process-level data</li>
          <li>ddhpc-application-sensor: records custom application signals</li>
        </ul>
      </section>
      <!------------------------------------------------------------------------------------------->


      <!-- SLIDE XX -->
      <!------------------------------------------------------------------------------------------->
      <section>
        <h2>Control &amp; Data Access</h2>
        <p>API endpoints and process controller allow application processes
          to be modified and to access the DDHPC system</p>
          <ul>
            <li>ddhpc-api-proxy: local forwarding agent and cache for the API to prevent bottlenecks.</li>
            <li>ddhpc-process-controller: can set process niceness and
              I/O niceness</li>
            </ul>
          </section>
          <!------------------------------------------------------------------------------------------->



          <!-- SLIDE XX -->
          <!------------------------------------------------------------------------------------------->
          <section>
            <h2>Where are we? Next steps.</h2>
              <ul>
                <li>Simple prototype implemented alongside a 4-node SLURM "toy" cluster in AWS</li>
                <li>First version of data model and API<br><br></li>

                <li>Implement some application use-cases.</li>
                <li>Explore different ways to react to signals:</li>
                <ul>
                  <li>programmatically in the application</li>
                  <li>via user-defined, high-level rules in the system</li>
                </ul>

                <li>How do we evaluate? What are the metrics of "success"?</li>
              </ul>
            </section>
            <!------------------------------------------------------------------------------------------->


          <section style="text-align: left;">
            <h1>THANK YOU</h1>
            <p>
              Slides available online: <br>
              <a style="background-color: #ca1e3b" href="https://oweidner.github.io/ross-2017-talk">
                https://oweidner.github.io/ross-2017-talk</a>
              </p>
            </section>

          </div>

        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>

        // Full list of configuration options available at:
        // https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({
          controls: true,
          progress: true,
          history: true,
          center: true,

          parallaxBackgroundImage: "./images/parallax.jpg",

          // Parallax background size
          parallaxBackgroundSize: "3000px 1694px", // - currently only pixels are supported (don't use % or auto)

          // Number of pixels to move the parallax background per slide
          // - Calculated automatically unless specified
          // - Set to 0 to disable movement along an axis
          // parallaxBackgroundHorizontal: 20,
          // parallaxBackgroundVertical: 50,

          slideNumber: true,
          slideNumber: 'c/t',

          transition: 'slide', // none/fade/slide/convex/concave/zoom

          // Optional reveal.js plugins
          dependencies: [
            { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
            { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
            { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
            { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
            { src: 'plugin/zoom-js/zoom.js', async: true },
            { src: 'plugin/notes/notes.js', async: true }
          ]
        });

        </script>

      </body>
      </html>
